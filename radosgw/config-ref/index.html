
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Ceph 对象网关配置参考 &mdash; Ceph Documentation</title>
    
    <link rel="stylesheet" href="../../_static/nature.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     'dev',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
    <link rel="top" title="Ceph Documentation" href="../../" />
    <link rel="up" title="Ceph 对象网关" href="../" />
    <link rel="next" title="管理手册" href="../admin/" />
    <link rel="prev" title="联盟网关的配置" href="../federated-config/" />
    <script type="text/javascript" src="http://ayni.ceph.com/public/js/ceph.js"></script>

  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex/" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../py-modindex/" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="../admin/" title="管理手册"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="../federated-config/" title="联盟网关的配置"
             accesskey="P">previous</a> |</li>
        <li><a href="../../">Ceph Documentation</a> &raquo;</li>
          <li><a href="../" accesskey="U">Ceph 对象网关</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="ceph">
<h1>Ceph 对象网关配置参考<a class="headerlink" href="#ceph" title="Permalink to this headline">¶</a></h1>
<p>下列的选项可加入 Ceph 配置文件（一般是 <tt class="docutils literal"><span class="pre">ceph.conf</span></tt> ）的 <tt class="docutils literal"><span class="pre">[client.radosgw.{instance-name}]</span></tt> 段下，很多选项都有默认值，你若未指定，自然用默认。</p>
<p><tt class="docutils literal"><span class="pre">rgw</span> <span class="pre">data</span></tt></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">描述:</th><td class="field-body">设置 Ceph 对象网关的数据文件位置。</td>
</tr>
<tr class="field-even field"><th class="field-name">类型:</th><td class="field-body">String</td>
</tr>
<tr class="field-odd field"><th class="field-name">默认值:</th><td class="field-body"><tt class="docutils literal"><span class="pre">/var/lib/ceph/radosgw/$cluster-$id</span></tt></td>
</tr>
</tbody>
</table>
<p><tt class="docutils literal"><span class="pre">rgw</span> <span class="pre">enable</span> <span class="pre">apis</span></tt></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">描述:</th><td class="field-body">启用指定的 API 。</td>
</tr>
<tr class="field-even field"><th class="field-name">类型:</th><td class="field-body">String</td>
</tr>
<tr class="field-odd field"><th class="field-name">默认值:</th><td class="field-body">所有 API ： <tt class="docutils literal"><span class="pre">s3,</span> <span class="pre">swift,</span> <span class="pre">swift_auth,</span> <span class="pre">admin</span></tt> 。</td>
</tr>
</tbody>
</table>
<p><tt class="docutils literal"><span class="pre">rgw</span> <span class="pre">cache</span> <span class="pre">enabled</span></tt></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">描述:</th><td class="field-body">是否启用 Ceph 对象网关缓存。</td>
</tr>
<tr class="field-even field"><th class="field-name">类型:</th><td class="field-body">Boolean</td>
</tr>
<tr class="field-odd field"><th class="field-name">默认值:</th><td class="field-body"><tt class="docutils literal"><span class="pre">true</span></tt></td>
</tr>
</tbody>
</table>
<p><tt class="docutils literal"><span class="pre">rgw</span> <span class="pre">cache</span> <span class="pre">lru</span> <span class="pre">size</span></tt></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">描述:</th><td class="field-body">Ceph 对象网关缓存的条目限制。</td>
</tr>
<tr class="field-even field"><th class="field-name">类型:</th><td class="field-body">Integer</td>
</tr>
<tr class="field-odd field"><th class="field-name">默认值:</th><td class="field-body"><tt class="docutils literal"><span class="pre">10000</span></tt></td>
</tr>
</tbody>
</table>
<p><tt class="docutils literal"><span class="pre">rgw</span> <span class="pre">socket</span> <span class="pre">path</span></tt></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">描述:</th><td class="field-body">域套接字的路径， <tt class="docutils literal"><span class="pre">FastCgiExternalServer</span></tt> 要使用此套接字。若未指定， Ceph 对象网关就不会以外部服务器运行。这里的路径必须与 <tt class="docutils literal"><span class="pre">rgw.conf</span></tt> 里的路径相同。</td>
</tr>
<tr class="field-even field"><th class="field-name">类型:</th><td class="field-body">String</td>
</tr>
<tr class="field-odd field"><th class="field-name">默认值:</th><td class="field-body">N/A</td>
</tr>
</tbody>
</table>
<p><tt class="docutils literal"><span class="pre">rgw</span> <span class="pre">host</span></tt></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">描述:</th><td class="field-body">Ceph 对象网关例程所在主机，可以是 IP 地址或者主机名。</td>
</tr>
<tr class="field-even field"><th class="field-name">类型:</th><td class="field-body">String</td>
</tr>
<tr class="field-odd field"><th class="field-name">默认值:</th><td class="field-body"><tt class="docutils literal"><span class="pre">0.0.0.0</span></tt></td>
</tr>
</tbody>
</table>
<p><tt class="docutils literal"><span class="pre">rgw</span> <span class="pre">port</span></tt></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">描述:</th><td class="field-body">例程接受请求的端口。若未指定， Ceph 对象网关将运行外部 FastCGI 。</td>
</tr>
<tr class="field-even field"><th class="field-name">类型:</th><td class="field-body">String</td>
</tr>
<tr class="field-odd field"><th class="field-name">默认值:</th><td class="field-body">None</td>
</tr>
</tbody>
</table>
<p><tt class="docutils literal"><span class="pre">rgw</span> <span class="pre">dns</span> <span class="pre">name</span></tt></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">描述:</th><td class="field-body">所服务域的 DNS 名称。请参考 region 配置里的 <tt class="docutils literal"><span class="pre">hostnames</span></tt> 选项。</td>
</tr>
<tr class="field-even field"><th class="field-name">类型:</th><td class="field-body">String</td>
</tr>
<tr class="field-odd field"><th class="field-name">默认值:</th><td class="field-body">None</td>
</tr>
</tbody>
</table>
<p><tt class="docutils literal"><span class="pre">rgw</span> <span class="pre">script</span> <span class="pre">uri</span></tt></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">描述:</th><td class="field-body">如果请求中没带 <tt class="docutils literal"><span class="pre">SCRIPT_URI</span></tt> 变量，这里的设置可作为补救。</td>
</tr>
<tr class="field-even field"><th class="field-name">类型:</th><td class="field-body">String</td>
</tr>
<tr class="field-odd field"><th class="field-name">默认值:</th><td class="field-body">None</td>
</tr>
</tbody>
</table>
<p><tt class="docutils literal"><span class="pre">rgw</span> <span class="pre">request</span> <span class="pre">uri</span></tt></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">描述:</th><td class="field-body">如果请求中没带 <tt class="docutils literal"><span class="pre">REQUEST_URI</span></tt> 变量，这里的设置可作为补救。</td>
</tr>
<tr class="field-even field"><th class="field-name">类型:</th><td class="field-body">String</td>
</tr>
<tr class="field-odd field"><th class="field-name">默认值:</th><td class="field-body">None</td>
</tr>
</tbody>
</table>
<p><tt class="docutils literal"><span class="pre">rgw</span> <span class="pre">print</span> <span class="pre">continue</span></tt></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">描述:</th><td class="field-body">如果可能的话，启用 <tt class="docutils literal"><span class="pre">100-continue</span></tt> 。</td>
</tr>
<tr class="field-even field"><th class="field-name">类型:</th><td class="field-body">Boolean</td>
</tr>
<tr class="field-odd field"><th class="field-name">默认值:</th><td class="field-body"><tt class="docutils literal"><span class="pre">true</span></tt></td>
</tr>
</tbody>
</table>
<p><tt class="docutils literal"><span class="pre">rgw</span> <span class="pre">remote</span> <span class="pre">addr</span> <span class="pre">param</span></tt></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">描述:</th><td class="field-body">远端地址参数。例如， HTTP 字段或者 <tt class="docutils literal"><span class="pre">X-Forwarded-For</span></tt> 地址（如果用了反向代理）。</td>
</tr>
<tr class="field-even field"><th class="field-name">类型:</th><td class="field-body">String</td>
</tr>
<tr class="field-odd field"><th class="field-name">默认值:</th><td class="field-body"><tt class="docutils literal"><span class="pre">REMOTE_ADDR</span></tt></td>
</tr>
</tbody>
</table>
<p><tt class="docutils literal"><span class="pre">rgw</span> <span class="pre">op</span> <span class="pre">thread</span> <span class="pre">timeout</span></tt></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">描述:</th><td class="field-body">在运行线程的超时值。</td>
</tr>
<tr class="field-even field"><th class="field-name">类型:</th><td class="field-body">Integer</td>
</tr>
<tr class="field-odd field"><th class="field-name">默认值:</th><td class="field-body">600</td>
</tr>
</tbody>
</table>
<p><tt class="docutils literal"><span class="pre">rgw</span> <span class="pre">op</span> <span class="pre">thread</span> <span class="pre">suicide</span> <span class="pre">timeout</span></tt></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">描述:</th><td class="field-body">Ceph 对象网关进程的自杀超时值（ <tt class="docutils literal"><span class="pre">timeout</span></tt> ）。设置为 <tt class="docutils literal"><span class="pre">0</span></tt> 时禁用。</td>
</tr>
<tr class="field-even field"><th class="field-name">类型:</th><td class="field-body">Integer</td>
</tr>
<tr class="field-odd field"><th class="field-name">默认值:</th><td class="field-body"><tt class="docutils literal"><span class="pre">0</span></tt></td>
</tr>
</tbody>
</table>
<p><tt class="docutils literal"><span class="pre">rgw</span> <span class="pre">thread</span> <span class="pre">pool</span> <span class="pre">size</span></tt></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">描述:</th><td class="field-body">线程池的尺寸。</td>
</tr>
<tr class="field-even field"><th class="field-name">类型:</th><td class="field-body">Integer</td>
</tr>
<tr class="field-odd field"><th class="field-name">默认值:</th><td class="field-body">100 threads.</td>
</tr>
</tbody>
</table>
<p><tt class="docutils literal"><span class="pre">rgw</span> <span class="pre">num</span> <span class="pre">rados</span> <span class="pre">handles</span></tt></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">描述:</th><td class="field-body">Ceph 对象网关的 <a class="reference external" href="../../rados/api/librados-intro/#step-2-configuring-a-cluster-handle">RADOS 集群处理器</a>数量。通过配置 RADOS 处理器数量可以使得各种类型的载荷都明显地提升性能，因为各个 RGW 工作线程在其短暂的活跃期内都可以分别挂靠一个 RADOS 处理器。</td>
</tr>
<tr class="field-even field"><th class="field-name">类型:</th><td class="field-body">Integer</td>
</tr>
<tr class="field-odd field"><th class="field-name">默认值:</th><td class="field-body"><tt class="docutils literal"><span class="pre">1</span></tt></td>
</tr>
</tbody>
</table>
<p><tt class="docutils literal"><span class="pre">rgw</span> <span class="pre">num</span> <span class="pre">control</span> <span class="pre">oids</span></tt></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">描述:</th><td class="field-body">不同的 <tt class="docutils literal"><span class="pre">rgw</span></tt> 例程间用于缓存同步的通知对象数量。</td>
</tr>
<tr class="field-even field"><th class="field-name">类型:</th><td class="field-body">Integer</td>
</tr>
<tr class="field-odd field"><th class="field-name">默认值:</th><td class="field-body"><tt class="docutils literal"><span class="pre">8</span></tt></td>
</tr>
</tbody>
</table>
<p><tt class="docutils literal"><span class="pre">rgw</span> <span class="pre">init</span> <span class="pre">timeout</span></tt></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">描述:</th><td class="field-body">Ceph 对象网关放弃初始化前坚持的时间，秒。</td>
</tr>
<tr class="field-even field"><th class="field-name">类型:</th><td class="field-body">Integer</td>
</tr>
<tr class="field-odd field"><th class="field-name">默认值:</th><td class="field-body"><tt class="docutils literal"><span class="pre">30</span></tt></td>
</tr>
</tbody>
</table>
<p><tt class="docutils literal"><span class="pre">rgw</span> <span class="pre">mime</span> <span class="pre">types</span> <span class="pre">file</span></tt></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">描述:</th><td class="field-body">MIME 类型数据库文件的路径，Swift 自动探测对象类型时要用到。</td>
</tr>
<tr class="field-even field"><th class="field-name">类型:</th><td class="field-body">String</td>
</tr>
<tr class="field-odd field"><th class="field-name">默认值:</th><td class="field-body"><tt class="docutils literal"><span class="pre">/etc/mime.types</span></tt></td>
</tr>
</tbody>
</table>
<p><tt class="docutils literal"><span class="pre">rgw</span> <span class="pre">gc</span> <span class="pre">max</span> <span class="pre">objs</span></tt></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">描述:</th><td class="field-body">垃圾回收进程在一个处理周期内可处理的最大对象数。</td>
</tr>
<tr class="field-even field"><th class="field-name">类型:</th><td class="field-body">Integer</td>
</tr>
<tr class="field-odd field"><th class="field-name">默认值:</th><td class="field-body"><tt class="docutils literal"><span class="pre">32</span></tt></td>
</tr>
</tbody>
</table>
<p><tt class="docutils literal"><span class="pre">rgw</span> <span class="pre">gc</span> <span class="pre">obj</span> <span class="pre">min</span> <span class="pre">wait</span></tt></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">描述:</th><td class="field-body">对象可被删除并由垃圾回收器处理前最少等待多长时间。</td>
</tr>
<tr class="field-even field"><th class="field-name">类型:</th><td class="field-body">Integer</td>
</tr>
<tr class="field-odd field"><th class="field-name">默认值:</th><td class="field-body"><tt class="docutils literal"><span class="pre">2</span> <span class="pre">*</span> <span class="pre">3600</span></tt></td>
</tr>
</tbody>
</table>
<p><tt class="docutils literal"><span class="pre">rgw</span> <span class="pre">gc</span> <span class="pre">processor</span> <span class="pre">max</span> <span class="pre">time</span></tt></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">描述:</th><td class="field-body">两个连续的垃圾回收周期起点的最大时间间隔。</td>
</tr>
<tr class="field-even field"><th class="field-name">类型:</th><td class="field-body">Integer</td>
</tr>
<tr class="field-odd field"><th class="field-name">默认值:</th><td class="field-body"><tt class="docutils literal"><span class="pre">3600</span></tt></td>
</tr>
</tbody>
</table>
<p><tt class="docutils literal"><span class="pre">rgw</span> <span class="pre">gc</span> <span class="pre">processor</span> <span class="pre">period</span></tt></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">描述:</th><td class="field-body">垃圾回收进程的运行周期。</td>
</tr>
<tr class="field-even field"><th class="field-name">类型:</th><td class="field-body">Integer</td>
</tr>
<tr class="field-odd field"><th class="field-name">默认值:</th><td class="field-body"><tt class="docutils literal"><span class="pre">3600</span></tt></td>
</tr>
</tbody>
</table>
<p><tt class="docutils literal"><span class="pre">rgw</span> <span class="pre">s3</span> <span class="pre">success</span> <span class="pre">create</span> <span class="pre">obj</span> <span class="pre">status</span></tt></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">描述:</th><td class="field-body"><tt class="docutils literal"><span class="pre">create-obj</span></tt> 的另一种成功状态响应。</td>
</tr>
<tr class="field-even field"><th class="field-name">类型:</th><td class="field-body">Integer</td>
</tr>
<tr class="field-odd field"><th class="field-name">默认值:</th><td class="field-body"><tt class="docutils literal"><span class="pre">0</span></tt></td>
</tr>
</tbody>
</table>
<p><tt class="docutils literal"><span class="pre">rgw</span> <span class="pre">resolve</span> <span class="pre">cname</span></tt></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">描述:</th><td class="field-body">如果主机名与 <tt class="docutils literal"><span class="pre">rgw</span> <span class="pre">dns</span> <span class="pre">name</span></tt> 不同， <tt class="docutils literal"><span class="pre">rgw</span></tt> 是否应该用请求的 hostname 字段的 DNS CNAME 记录。</td>
</tr>
<tr class="field-even field"><th class="field-name">类型:</th><td class="field-body">Boolean</td>
</tr>
<tr class="field-odd field"><th class="field-name">默认值:</th><td class="field-body"><tt class="docutils literal"><span class="pre">false</span></tt></td>
</tr>
</tbody>
</table>
<p><tt class="docutils literal"><span class="pre">rgw</span> <span class="pre">obj</span> <span class="pre">stripe</span> <span class="pre">size</span></tt></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">描述:</th><td class="field-body">Ceph 对象网关的对象条带尺寸。关于条带化请参考<a class="reference external" href="../../architecture#data-striping">体系结构</a>。</td>
</tr>
<tr class="field-even field"><th class="field-name">类型:</th><td class="field-body">Integer</td>
</tr>
<tr class="field-odd field"><th class="field-name">默认值:</th><td class="field-body"><tt class="docutils literal"><span class="pre">4</span> <span class="pre">&lt;&lt;</span> <span class="pre">20</span></tt></td>
</tr>
</tbody>
</table>
<p><tt class="docutils literal"><span class="pre">rgw</span> <span class="pre">extended</span> <span class="pre">http</span> <span class="pre">attrs</span></tt></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">描述:</th><td class="field-body">为实体（用户、桶或对象）新增可设置的属性集。可以在上传实体时把这些额外属性设置在 HTTP 头的字段里、或者用 POST 方法修改；如果设置过，在此实体上执行 GET/HEAD 操作时这些属性就会以 HTTP 头的字段返回。</td>
</tr>
<tr class="field-even field"><th class="field-name">类型:</th><td class="field-body">String</td>
</tr>
<tr class="field-odd field"><th class="field-name">默认值:</th><td class="field-body">None</td>
</tr>
<tr class="field-even field"><th class="field-name">实例:</th><td class="field-body">&#8220;content_foo, content_bar, x-foo-bar&#8221;</td>
</tr>
</tbody>
</table>
<p><tt class="docutils literal"><span class="pre">rgw</span> <span class="pre">exit</span> <span class="pre">timeout</span> <span class="pre">secs</span></tt></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">描述:</th><td class="field-body">等待某一进程多长时间（秒）后无条件退出。</td>
</tr>
<tr class="field-even field"><th class="field-name">类型:</th><td class="field-body">Integer</td>
</tr>
<tr class="field-odd field"><th class="field-name">默认值:</th><td class="field-body"><tt class="docutils literal"><span class="pre">120</span></tt></td>
</tr>
</tbody>
</table>
<p><tt class="docutils literal"><span class="pre">rgw</span> <span class="pre">get</span> <span class="pre">obj</span> <span class="pre">window</span> <span class="pre">size</span></tt></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">描述:</th><td class="field-body">为单对象请求预留的窗口大小（字节）。</td>
</tr>
<tr class="field-even field"><th class="field-name">类型:</th><td class="field-body">Integer</td>
</tr>
<tr class="field-odd field"><th class="field-name">默认值:</th><td class="field-body"><tt class="docutils literal"><span class="pre">16</span> <span class="pre">&lt;&lt;</span> <span class="pre">20</span></tt></td>
</tr>
</tbody>
</table>
<p><tt class="docutils literal"><span class="pre">rgw</span> <span class="pre">get</span> <span class="pre">obj</span> <span class="pre">max</span> <span class="pre">req</span> <span class="pre">size</span></tt></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">描述:</th><td class="field-body">向 Ceph 存储集群发起的一次 GET 请求的最大尺寸。</td>
</tr>
<tr class="field-even field"><th class="field-name">类型:</th><td class="field-body">Integer</td>
</tr>
<tr class="field-odd field"><th class="field-name">默认值:</th><td class="field-body"><tt class="docutils literal"><span class="pre">4</span> <span class="pre">&lt;&lt;</span> <span class="pre">20</span></tt></td>
</tr>
</tbody>
</table>
<p><tt class="docutils literal"><span class="pre">rgw</span> <span class="pre">relaxed</span> <span class="pre">s3</span> <span class="pre">bucket</span> <span class="pre">names</span></tt></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">描述:</th><td class="field-body">对 US region 的桶启用宽松的桶名规则。</td>
</tr>
<tr class="field-even field"><th class="field-name">类型:</th><td class="field-body">Boolean</td>
</tr>
<tr class="field-odd field"><th class="field-name">默认值:</th><td class="field-body"><tt class="docutils literal"><span class="pre">false</span></tt></td>
</tr>
</tbody>
</table>
<p><tt class="docutils literal"><span class="pre">rgw</span> <span class="pre">list</span> <span class="pre">buckets</span> <span class="pre">max</span> <span class="pre">chunk</span></tt></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">描述:</th><td class="field-body">列举用户桶时，每次检出的最大桶数。</td>
</tr>
<tr class="field-even field"><th class="field-name">类型:</th><td class="field-body">Integer</td>
</tr>
<tr class="field-odd field"><th class="field-name">默认值:</th><td class="field-body"><tt class="docutils literal"><span class="pre">1000</span></tt></td>
</tr>
</tbody>
</table>
<p><tt class="docutils literal"><span class="pre">rgw</span> <span class="pre">override</span> <span class="pre">bucket</span> <span class="pre">index</span> <span class="pre">max</span> <span class="pre">shards</span></tt></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">描述:</th><td class="field-body">桶索引对象的分片数量， 0 表示没有分片。我们不建议把这个值设置得太大（比如大于 1000 ），因为这样会增加罗列桶时的开销。</td>
</tr>
<tr class="field-even field"><th class="field-name">类型:</th><td class="field-body">Integer</td>
</tr>
<tr class="field-odd field"><th class="field-name">默认值:</th><td class="field-body"><tt class="docutils literal"><span class="pre">0</span></tt></td>
</tr>
</tbody>
</table>
<p><tt class="docutils literal"><span class="pre">rgw</span> <span class="pre">num</span> <span class="pre">zone</span> <span class="pre">opstate</span> <span class="pre">shards</span></tt></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">描述:</th><td class="field-body">用于保存 region 间复制进度的最大消息片数。</td>
</tr>
<tr class="field-even field"><th class="field-name">类型:</th><td class="field-body">Integer</td>
</tr>
<tr class="field-odd field"><th class="field-name">默认值:</th><td class="field-body"><tt class="docutils literal"><span class="pre">128</span></tt></td>
</tr>
</tbody>
</table>
<p><tt class="docutils literal"><span class="pre">rgw</span> <span class="pre">opstate</span> <span class="pre">ratelimit</span> <span class="pre">sec</span></tt></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">描述:</th><td class="field-body">各次上传后状态更新操作的最小间隔时间。 <tt class="docutils literal"><span class="pre">0</span></tt> 禁用此限速。</td>
</tr>
<tr class="field-even field"><th class="field-name">类型:</th><td class="field-body">Integer</td>
</tr>
<tr class="field-odd field"><th class="field-name">默认值:</th><td class="field-body"><tt class="docutils literal"><span class="pre">30</span></tt></td>
</tr>
</tbody>
</table>
<p><tt class="docutils literal"><span class="pre">rgw</span> <span class="pre">curl</span> <span class="pre">wait</span> <span class="pre">timeout</span> <span class="pre">ms</span></tt></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">描述:</th><td class="field-body">某些特定 <tt class="docutils literal"><span class="pre">curl</span></tt> 调用的超时值，毫秒。</td>
</tr>
<tr class="field-even field"><th class="field-name">类型:</th><td class="field-body">Integer</td>
</tr>
<tr class="field-odd field"><th class="field-name">默认值:</th><td class="field-body"><tt class="docutils literal"><span class="pre">1000</span></tt></td>
</tr>
</tbody>
</table>
<p><tt class="docutils literal"><span class="pre">rgw</span> <span class="pre">copy</span> <span class="pre">obj</span> <span class="pre">progress</span></tt></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">描述:</th><td class="field-body">长时间复制操作时允许输出对象进度。</td>
</tr>
<tr class="field-even field"><th class="field-name">类型:</th><td class="field-body">Boolean</td>
</tr>
<tr class="field-odd field"><th class="field-name">默认值:</th><td class="field-body"><tt class="docutils literal"><span class="pre">true</span></tt></td>
</tr>
</tbody>
</table>
<p><tt class="docutils literal"><span class="pre">rgw</span> <span class="pre">copy</span> <span class="pre">obj</span> <span class="pre">progress</span> <span class="pre">every</span> <span class="pre">bytes</span></tt></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">描述:</th><td class="field-body">复制进度输出的粒度，字节数。</td>
</tr>
<tr class="field-even field"><th class="field-name">类型:</th><td class="field-body">Integer</td>
</tr>
<tr class="field-odd field"><th class="field-name">默认值:</th><td class="field-body"><tt class="docutils literal"><span class="pre">1024</span> <span class="pre">*</span> <span class="pre">1024</span></tt></td>
</tr>
</tbody>
</table>
<p><tt class="docutils literal"><span class="pre">rgw</span> <span class="pre">admin</span> <span class="pre">entry</span></tt></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">描述:</th><td class="field-body">管理 URL 请求的入口点。</td>
</tr>
<tr class="field-even field"><th class="field-name">类型:</th><td class="field-body">String</td>
</tr>
<tr class="field-odd field"><th class="field-name">默认值:</th><td class="field-body"><tt class="docutils literal"><span class="pre">admin</span></tt></td>
</tr>
</tbody>
</table>
<p><tt class="docutils literal"><span class="pre">rgw</span> <span class="pre">content</span> <span class="pre">length</span> <span class="pre">compat</span></tt></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">描述:</th><td class="field-body">允许兼容设置了 CONTENT_LENGTH 和 HTTP_CONTENT_LENGTH 的 FCGI 请求。</td>
</tr>
<tr class="field-even field"><th class="field-name">类型:</th><td class="field-body">Boolean</td>
</tr>
<tr class="field-odd field"><th class="field-name">默认值:</th><td class="field-body"><tt class="docutils literal"><span class="pre">false</span></tt></td>
</tr>
</tbody>
</table>
<div class="section" id="region">
<h2>region （域组）<a class="headerlink" href="#region" title="Permalink to this headline">¶</a></h2>
<p>Ceph 从 v0.67 版开始，通过 region 概念支持 Ceph 对象网关联盟部署和统一的命名空间。 region 定义了位于一或多个域内的 Ceph 对象网关例程的地理位置。</p>
<p>region 的配置不同于一般配置过程，因为不是所有的配置都放在 Ceph 配置文件中。从 Ceph 0.67 版开始，你可以列举 region 、获取 region 配置或设置 region 配置。</p>
<div class="section" id="id1">
<h3>罗列 region<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h3>
<p>Ceph 集群可包含一系列 region ，可用下列命令列举 region ：</p>
<div class="highlight-python"><pre>sudo radosgw-admin regions list</pre>
</div>
<p><tt class="docutils literal"><span class="pre">radosgw-admin</span></tt> 命令会返回 JSON 格式的 region 列表。</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="p">{</span> <span class="s2">&quot;default_info&quot;</span><span class="o">:</span> <span class="p">{</span> <span class="s2">&quot;default_region&quot;</span><span class="o">:</span> <span class="s2">&quot;default&quot;</span><span class="p">},</span>
  <span class="s2">&quot;regions&quot;</span><span class="o">:</span> <span class="p">[</span>
        <span class="s2">&quot;default&quot;</span><span class="p">]}</span>
</pre></div>
</div>
</div>
<div class="section" id="region-map">
<h3>获取 region-map<a class="headerlink" href="#region-map" title="Permalink to this headline">¶</a></h3>
<p>要获取各 region 的详细情况，可执行：</p>
<div class="highlight-python"><pre>sudo radosgw-admin region-map get</pre>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">如果你的到了 <tt class="docutils literal"><span class="pre">failed</span> <span class="pre">to</span> <span class="pre">read</span> <span class="pre">region</span> <span class="pre">map</span></tt> 错误，先试试 <tt class="docutils literal"><span class="pre">sudo</span> <span class="pre">radosgw-admin</span> <span class="pre">region-map</span> <span class="pre">update</span></tt> 。</p>
</div>
</div>
<div class="section" id="id2">
<h3>获取单个 region<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h3>
<p>要查看某 region 的配置，执行：</p>
<div class="highlight-python"><pre>radosgw-admin region get [--rgw-region=&lt;region&gt;]</pre>
</div>
<p><tt class="docutils literal"><span class="pre">default</span></tt> 这个 region 的配置大致如此：</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="o">:</span> <span class="s2">&quot;default&quot;</span><span class="p">,</span>
 <span class="s2">&quot;api_name&quot;</span><span class="o">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
 <span class="s2">&quot;is_master&quot;</span><span class="o">:</span> <span class="s2">&quot;true&quot;</span><span class="p">,</span>
 <span class="s2">&quot;endpoints&quot;</span><span class="o">:</span> <span class="p">[],</span>
 <span class="s2">&quot;hostnames&quot;</span><span class="o">:</span> <span class="p">[],</span>
 <span class="s2">&quot;master_zone&quot;</span><span class="o">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
 <span class="s2">&quot;zones&quot;</span><span class="o">:</span> <span class="p">[</span>
   <span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="o">:</span> <span class="s2">&quot;default&quot;</span><span class="p">,</span>
    <span class="s2">&quot;endpoints&quot;</span><span class="o">:</span> <span class="p">[],</span>
    <span class="s2">&quot;log_meta&quot;</span><span class="o">:</span> <span class="s2">&quot;false&quot;</span><span class="p">,</span>
    <span class="s2">&quot;log_data&quot;</span><span class="o">:</span> <span class="s2">&quot;false&quot;</span><span class="p">}</span>
  <span class="p">],</span>
 <span class="s2">&quot;placement_targets&quot;</span><span class="o">:</span> <span class="p">[</span>
   <span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="o">:</span> <span class="s2">&quot;default-placement&quot;</span><span class="p">,</span>
    <span class="s2">&quot;tags&quot;</span><span class="o">:</span> <span class="p">[]</span> <span class="p">}],</span>
 <span class="s2">&quot;default_placement&quot;</span><span class="o">:</span> <span class="s2">&quot;default-placement&quot;</span><span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="id3">
<h3>设置一 region<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h3>
<p>定义 region 需创建一个 JSON 对象、并提供必需的选项：</p>
<ol class="arabic simple">
<li><tt class="docutils literal"><span class="pre">name</span></tt>: region 名字，必需。</li>
<li><tt class="docutils literal"><span class="pre">api_name</span></tt>: 此 region 的 API 名字，可选。</li>
<li><tt class="docutils literal"><span class="pre">is_master</span></tt>: 决定着此 region 是否为主 region ，必需。<strong>注：</strong>只能有一个主 region 。</li>
<li><tt class="docutils literal"><span class="pre">endpoints</span></tt>: region 内的所有终结点列表。例如，你可以用多个域名指向同一 region 区，记得在斜杠前加反斜杠进行转义（ <tt class="docutils literal"><span class="pre">\/</span></tt> ）。也可以给终结点指定端口号（ <tt class="docutils literal"><span class="pre">fqdn:port</span></tt> ），可选。</li>
<li><tt class="docutils literal"><span class="pre">hostnames</span></tt>: region 内所有主机名的列表。例如，这样你就可以在同一 region 内使用多个域名了。可选配置。此列表会自动包含 <tt class="docutils literal"><span class="pre">rgw</span> <span class="pre">dns</span> <span class="pre">name</span></tt> 配置。更改此配置后需重启所有 <tt class="docutils literal"><span class="pre">radosgw</span></tt> 守护进程。</li>
<li><tt class="docutils literal"><span class="pre">master_zone</span></tt>: region 的主域，可选。若未指定，则选择默认域。<strong>注：</strong>每个 region 只能有一个主域。</li>
<li><tt class="docutils literal"><span class="pre">zones</span></tt>: region 内所有域的列表。各个域都有名字（必需的）、一系列终结点（可选的）、以及网关是否要记录元数据和数据操作（默认不记录）。</li>
<li><tt class="docutils literal"><span class="pre">placement_targets</span></tt>: 放置目标列表（可选）。每个放置目标都包含此放置目标的名字（必需）、还有一个标签列表（可选），这样只有带这些标签的用户可以使用此放置目标（即用户信息中的 <tt class="docutils literal"><span class="pre">placement_tags</span></tt> 字段）。</li>
<li><tt class="docutils literal"><span class="pre">default_placement</span></tt>: 对象索引及数据的默认放置目标，默认为 <tt class="docutils literal"><span class="pre">default-placement</span></tt> 。你可以在用户信息里给各用户设置一个用户级的默认放置目标。</li>
</ol>
<p>要配置起一个 region ，需创建一个包含必需字段的 JSON 对象，把它存入文件（如 <tt class="docutils literal"><span class="pre">region.json</span></tt> ），然后执行下列命令：</p>
<div class="highlight-python"><pre>sudo radosgw-admin region set --infile region.json</pre>
</div>
<p>其中 <tt class="docutils literal"><span class="pre">region.json</span></tt> 是你创建的 JSON 文件。</p>
<div class="admonition important">
<p class="first admonition-title">Important</p>
<p class="last">默认 region <tt class="docutils literal"><span class="pre">default</span></tt> 的 <tt class="docutils literal"><span class="pre">is_master</span></tt> 字段值默认为 <tt class="docutils literal"><span class="pre">true</span></tt> 。如果你想新建一 region 并让它作为主 region ，那你必须把 <tt class="docutils literal"><span class="pre">default</span></tt> region 的 <tt class="docutils literal"><span class="pre">is_master</span></tt> 设置为 <tt class="docutils literal"><span class="pre">false</span></tt> ，或者干脆删除 <tt class="docutils literal"><span class="pre">default</span></tt> region 。</p>
</div>
<p>最后，更新 region 图。</p>
<div class="highlight-python"><pre>sudo radosgw-admin region-map update</pre>
</div>
</div>
<div class="section" id="id4">
<h3>配置 region 图<a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h3>
<p>配置 region 图的过程包括创建含一或多个 region 的 JSON 对象，还有设置集群的主 region <tt class="docutils literal"><span class="pre">master_region</span></tt> 。 region 图内的各 region 都由键/值对组成，其中 <tt class="docutils literal"><span class="pre">key</span></tt> 选项等价于单独配置 region 时的 <tt class="docutils literal"><span class="pre">name</span></tt> 选项， <tt class="docutils literal"><span class="pre">val</span></tt> 是包含单个 region 完整配置的 JSON 对象。</p>
<p>你可以只有一个 region ，其 <tt class="docutils literal"><span class="pre">is_master</span></tt> 设置为 <tt class="docutils literal"><span class="pre">true</span></tt> ，而且必须在 region 图末尾设置为 <tt class="docutils literal"><span class="pre">master_region</span></tt> 。下面的 JSON 对象是默认 region 图的实例。</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="p">{</span> <span class="s2">&quot;regions&quot;</span><span class="o">:</span> <span class="p">[</span>
     <span class="p">{</span> <span class="s2">&quot;key&quot;</span><span class="o">:</span> <span class="s2">&quot;default&quot;</span><span class="p">,</span>
       <span class="s2">&quot;val&quot;</span><span class="o">:</span> <span class="p">{</span> <span class="s2">&quot;name&quot;</span><span class="o">:</span> <span class="s2">&quot;default&quot;</span><span class="p">,</span>
       <span class="s2">&quot;api_name&quot;</span><span class="o">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
       <span class="s2">&quot;is_master&quot;</span><span class="o">:</span> <span class="s2">&quot;true&quot;</span><span class="p">,</span>
       <span class="s2">&quot;endpoints&quot;</span><span class="o">:</span> <span class="p">[],</span>
       <span class="s2">&quot;hostnames&quot;</span><span class="o">:</span> <span class="p">[],</span>
       <span class="s2">&quot;master_zone&quot;</span><span class="o">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
       <span class="s2">&quot;zones&quot;</span><span class="o">:</span> <span class="p">[</span>
         <span class="p">{</span> <span class="s2">&quot;name&quot;</span><span class="o">:</span> <span class="s2">&quot;default&quot;</span><span class="p">,</span>
           <span class="s2">&quot;endpoints&quot;</span><span class="o">:</span> <span class="p">[],</span>
           <span class="s2">&quot;log_meta&quot;</span><span class="o">:</span> <span class="s2">&quot;false&quot;</span><span class="p">,</span>
            <span class="s2">&quot;log_data&quot;</span><span class="o">:</span> <span class="s2">&quot;false&quot;</span><span class="p">}],</span>
            <span class="s2">&quot;placement_targets&quot;</span><span class="o">:</span> <span class="p">[</span>
              <span class="p">{</span> <span class="s2">&quot;name&quot;</span><span class="o">:</span> <span class="s2">&quot;default-placement&quot;</span><span class="p">,</span>
                <span class="s2">&quot;tags&quot;</span><span class="o">:</span> <span class="p">[]}],</span>
                <span class="s2">&quot;default_placement&quot;</span><span class="o">:</span> <span class="s2">&quot;default-placement&quot;</span>
              <span class="p">}</span>
          <span class="p">}</span>
       <span class="p">],</span>
   <span class="s2">&quot;master_region&quot;</span><span class="o">:</span> <span class="s2">&quot;default&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>要配置一个 region 图，执行此命令：</p>
<div class="highlight-python"><pre>sudo radosgw-admin region-map set --infile regionmap.json</pre>
</div>
<p>其中 <tt class="docutils literal"><span class="pre">regionmap.json</span></tt> 是创建的 JSON 文件。确保你创建了 region 图里所指的那些域。最后，更新此图。</p>
<div class="highlight-python"><pre>sudo radosgw-admin regionmap update</pre>
</div>
</div>
</div>
<div class="section" id="id5">
<h2>域<a class="headerlink" href="#id5" title="Permalink to this headline">¶</a></h2>
<p>从 Ceph v0.67 版起， Ceph 对象网关支持域概念，它是一或多个 Ceph 对象网关例程组成的逻辑组。</p>
<p>域的配置不同于典型配置过程，因为并非所有配置都位于 Ceph 配置文件内。从 0.67 版起，你可以列举域、获取域配置、设置域配置。</p>
<div class="section" id="id6">
<h3>列举域<a class="headerlink" href="#id6" title="Permalink to this headline">¶</a></h3>
<p>要列举某集群内的域，执行：</p>
<div class="highlight-python"><pre>sudo radosgw-admin zone list</pre>
</div>
</div>
<div class="section" id="id7">
<h3>获取单个域<a class="headerlink" href="#id7" title="Permalink to this headline">¶</a></h3>
<p>要获取某一域的配置，执行：</p>
<div class="highlight-python"><pre>sudo radosgw-admin zone get [--rgw-zone=&lt;zone&gt;]</pre>
</div>
<p><tt class="docutils literal"><span class="pre">default</span></tt> 这个默认域的配置大致如此：</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="p">{</span> <span class="s2">&quot;domain_root&quot;</span><span class="o">:</span> <span class="s2">&quot;.rgw&quot;</span><span class="p">,</span>
  <span class="s2">&quot;control_pool&quot;</span><span class="o">:</span> <span class="s2">&quot;.rgw.control&quot;</span><span class="p">,</span>
  <span class="s2">&quot;gc_pool&quot;</span><span class="o">:</span> <span class="s2">&quot;.rgw.gc&quot;</span><span class="p">,</span>
  <span class="s2">&quot;log_pool&quot;</span><span class="o">:</span> <span class="s2">&quot;.log&quot;</span><span class="p">,</span>
  <span class="s2">&quot;intent_log_pool&quot;</span><span class="o">:</span> <span class="s2">&quot;.intent-log&quot;</span><span class="p">,</span>
  <span class="s2">&quot;usage_log_pool&quot;</span><span class="o">:</span> <span class="s2">&quot;.usage&quot;</span><span class="p">,</span>
  <span class="s2">&quot;user_keys_pool&quot;</span><span class="o">:</span> <span class="s2">&quot;.users&quot;</span><span class="p">,</span>
  <span class="s2">&quot;user_email_pool&quot;</span><span class="o">:</span> <span class="s2">&quot;.users.email&quot;</span><span class="p">,</span>
  <span class="s2">&quot;user_swift_pool&quot;</span><span class="o">:</span> <span class="s2">&quot;.users.swift&quot;</span><span class="p">,</span>
  <span class="s2">&quot;user_uid_pool&quot;</span><span class="o">:</span> <span class="s2">&quot;.users.uid&quot;</span><span class="p">,</span>
  <span class="s2">&quot;system_key&quot;</span><span class="o">:</span> <span class="p">{</span> <span class="s2">&quot;access_key&quot;</span><span class="o">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="s2">&quot;secret_key&quot;</span><span class="o">:</span> <span class="s2">&quot;&quot;</span><span class="p">},</span>
  <span class="s2">&quot;placement_pools&quot;</span><span class="o">:</span> <span class="p">[</span>
      <span class="p">{</span>  <span class="s2">&quot;key&quot;</span><span class="o">:</span> <span class="s2">&quot;default-placement&quot;</span><span class="p">,</span>
         <span class="s2">&quot;val&quot;</span><span class="o">:</span> <span class="p">{</span> <span class="s2">&quot;index_pool&quot;</span><span class="o">:</span> <span class="s2">&quot;.rgw.buckets.index&quot;</span><span class="p">,</span>
                  <span class="s2">&quot;data_pool&quot;</span><span class="o">:</span> <span class="s2">&quot;.rgw.buckets&quot;</span><span class="p">}</span>
      <span class="p">}</span>
    <span class="p">]</span>
  <span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="id8">
<h3>配置域<a class="headerlink" href="#id8" title="Permalink to this headline">¶</a></h3>
<p>配置域时需指定一系列的 Ceph 对象网关存储池。为保持一致性，我们建议用区域名作为存储池名字的前缀。存储池配置见<a class="reference internal" href="#id10">存储池</a>。</p>
<p>要配置起一个域，需创建包含存储池的 JSON 对象、并存入文件（如 <tt class="docutils literal"><span class="pre">zone.json</span></tt> ）；然后执行下列命令，把 <tt class="docutils literal"><span class="pre">{zone-name}</span></tt> 替换为域名称：</p>
<div class="highlight-python"><pre>sudo radosgw-admin zone set --rgw-zone={zone-name} --infile zone.json</pre>
</div>
<p>其中， <tt class="docutils literal"><span class="pre">zone.json</span></tt> 是你创建的 JSON 文件。</p>
</div>
</div>
<div class="section" id="id9">
<h2>region 和域选项<a class="headerlink" href="#id9" title="Permalink to this headline">¶</a></h2>
<p>你可以在 Ceph 配置文件中的各例程 <tt class="docutils literal"><span class="pre">[client.radosgw.{instance-name}]</span></tt> 段下设置下列选项。</p>
<p class="versionadded">
<span class="versionmodified">New in version v.67.</span></p>
<p><tt class="docutils literal"><span class="pre">rgw</span> <span class="pre">zone</span></tt></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">描述:</th><td class="field-body">网关例程所在的域名称。</td>
</tr>
<tr class="field-even field"><th class="field-name">类型:</th><td class="field-body">String</td>
</tr>
<tr class="field-odd field"><th class="field-name">默认值:</th><td class="field-body">None</td>
</tr>
</tbody>
</table>
<p class="versionadded">
<span class="versionmodified">New in version v.67.</span></p>
<p><tt class="docutils literal"><span class="pre">rgw</span> <span class="pre">region</span></tt></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">描述:</th><td class="field-body">网关例程所在的 region 名。</td>
</tr>
<tr class="field-even field"><th class="field-name">类型:</th><td class="field-body">String</td>
</tr>
<tr class="field-odd field"><th class="field-name">默认值:</th><td class="field-body">None</td>
</tr>
</tbody>
</table>
<p class="versionadded">
<span class="versionmodified">New in version v.67.</span></p>
<p><tt class="docutils literal"><span class="pre">rgw</span> <span class="pre">default</span> <span class="pre">region</span> <span class="pre">info</span> <span class="pre">oid</span></tt></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">描述:</th><td class="field-body">用于保存默认 region 的 OID 。我们不建议更改此选项。</td>
</tr>
<tr class="field-even field"><th class="field-name">类型:</th><td class="field-body">String</td>
</tr>
<tr class="field-odd field"><th class="field-name">默认值:</th><td class="field-body"><tt class="docutils literal"><span class="pre">default.region</span></tt></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="id10">
<h2>存储池<a class="headerlink" href="#id10" title="Permalink to this headline">¶</a></h2>
<p>Ceph 域会映射到一系列 Ceph 存储集群的存储池。</p>
<div class="topic">
<p class="topic-title first">手动创建存储池与自动生成的存储池对比</p>
<p>如果你给 Ceph 对象网关的用户密钥分配了写权限，此网关就有能力自动创建存储池。这样虽便捷，但 Ceph 对象存储集群的归置组数量会是默认值（此值也许不太理想）或者 Ceph 配置文件中的自定义配置。如果你想让 Ceph 对象网关自动创建存储池，确保归置组数量的默认值要合理。详情见<a class="reference external" href="../../rados/configuration/pool-pg-config-ref/">存储池配置</a>，关于创建存储池见<a class="reference external" href="../../rados/operations/pools">集群存储池</a>。</p>
</div>
<p>Ceph 对象网关的默认域的默认存储池有：</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">.rgw</span></tt></li>
<li><tt class="docutils literal"><span class="pre">.rgw.control</span></tt></li>
<li><tt class="docutils literal"><span class="pre">.rgw.gc</span></tt></li>
<li><tt class="docutils literal"><span class="pre">.log</span></tt></li>
<li><tt class="docutils literal"><span class="pre">.intent-log</span></tt></li>
<li><tt class="docutils literal"><span class="pre">.usage</span></tt></li>
<li><tt class="docutils literal"><span class="pre">.users</span></tt></li>
<li><tt class="docutils literal"><span class="pre">.users.email</span></tt></li>
<li><tt class="docutils literal"><span class="pre">.users.swift</span></tt></li>
<li><tt class="docutils literal"><span class="pre">.users.uid</span></tt></li>
</ul>
<p>你应该能够清晰地判断某个域会怎样访问各存储池。你可以为每个域创建一系列存储池，或者让多个域共用同一系列的存储池。作为最佳实践，我们建议分别位于各 region 中的主域和二级域都要有各自的存储池系列。为某个域创建存储池时，建议默认存储池名以 region 名和域名作为前缀，例如：</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">.region1-zone1.domain.rgw</span></tt></li>
<li><tt class="docutils literal"><span class="pre">.region1-zone1.rgw.control</span></tt></li>
<li><tt class="docutils literal"><span class="pre">.region1-zone1.rgw.gc</span></tt></li>
<li><tt class="docutils literal"><span class="pre">.region1-zone1.log</span></tt></li>
<li><tt class="docutils literal"><span class="pre">.region1-zone1.intent-log</span></tt></li>
<li><tt class="docutils literal"><span class="pre">.region1-zone1.usage</span></tt></li>
<li><tt class="docutils literal"><span class="pre">.region1-zone1.users</span></tt></li>
<li><tt class="docutils literal"><span class="pre">.region1-zone1.users.email</span></tt></li>
<li><tt class="docutils literal"><span class="pre">.region1-zone1.users.swift</span></tt></li>
<li><tt class="docutils literal"><span class="pre">.region1-zone1.users.uid</span></tt></li>
</ul>
<p>Ceph 对象网关会把桶索引（ <tt class="docutils literal"><span class="pre">index_pool</span></tt> ）和桶数据（ <tt class="docutils literal"><span class="pre">data_pool</span></tt> ）存储到归置存储池，这些可以重叠——也就是你可以把索引和数据存入同一存储池。索引存储池的默认归置地是 <tt class="docutils literal"><span class="pre">.rgw.buckets.index</span></tt> ，数据存储池的默认归置地是 <tt class="docutils literal"><span class="pre">.rgw.buckets</span></tt> ，给域指定存储池的方法见<a class="reference internal" href="#id5">域</a>。</p>
<p class="deprecated">
<span class="versionmodified">Deprecated since version v.67.</span></p>
<p><tt class="docutils literal"><span class="pre">rgw</span> <span class="pre">cluster</span> <span class="pre">root</span> <span class="pre">pool</span></tt></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">描述:</th><td class="field-body">为此例程存储 <tt class="docutils literal"><span class="pre">radosgw</span></tt> 元数据的存储池。从 v0.67 之后不再支持，可改用 <tt class="docutils literal"><span class="pre">rgw</span> <span class="pre">zone</span> <span class="pre">root</span> <span class="pre">pool</span></tt> 。</td>
</tr>
<tr class="field-even field"><th class="field-name">类型:</th><td class="field-body">String</td>
</tr>
<tr class="field-odd field"><th class="field-name">是否必需:</th><td class="field-body">No</td>
</tr>
<tr class="field-even field"><th class="field-name">默认值:</th><td class="field-body"><tt class="docutils literal"><span class="pre">.rgw.root</span></tt></td>
</tr>
<tr class="field-odd field"><th class="field-name">替代选项:</th><td class="field-body"><tt class="docutils literal"><span class="pre">rgw</span> <span class="pre">zone</span> <span class="pre">root</span> <span class="pre">pool</span></tt></td>
</tr>
</tbody>
</table>
<p class="versionadded">
<span class="versionmodified">New in version v.67.</span></p>
<p><tt class="docutils literal"><span class="pre">rgw</span> <span class="pre">region</span> <span class="pre">root</span> <span class="pre">pool</span></tt></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">描述:</th><td class="field-body">用于存储此 region 所有相关信息的存储池。</td>
</tr>
<tr class="field-even field"><th class="field-name">类型:</th><td class="field-body">String</td>
</tr>
<tr class="field-odd field"><th class="field-name">默认值:</th><td class="field-body"><tt class="docutils literal"><span class="pre">.rgw.root</span></tt></td>
</tr>
</tbody>
</table>
<p class="versionadded">
<span class="versionmodified">New in version v.67.</span></p>
<p><tt class="docutils literal"><span class="pre">rgw</span> <span class="pre">zone</span> <span class="pre">root</span> <span class="pre">pool</span></tt></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">描述:</th><td class="field-body">用于存储此域所有相关信息的存储池。</td>
</tr>
<tr class="field-even field"><th class="field-name">类型:</th><td class="field-body">String</td>
</tr>
<tr class="field-odd field"><th class="field-name">默认值:</th><td class="field-body"><tt class="docutils literal"><span class="pre">.rgw.root</span></tt></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="swift">
<h2>Swift 选项<a class="headerlink" href="#swift" title="Permalink to this headline">¶</a></h2>
<p><tt class="docutils literal"><span class="pre">rgw</span> <span class="pre">enforce</span> <span class="pre">swift</span> <span class="pre">acls</span></tt></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">描述:</th><td class="field-body">强制使用 Swift 的访问控制列表（ ACL ）选项。</td>
</tr>
<tr class="field-even field"><th class="field-name">类型:</th><td class="field-body">Boolean</td>
</tr>
<tr class="field-odd field"><th class="field-name">默认值:</th><td class="field-body"><tt class="docutils literal"><span class="pre">true</span></tt></td>
</tr>
</tbody>
</table>
<p><tt class="docutils literal"><span class="pre">rgw</span> <span class="pre">swift</span> <span class="pre">token</span> <span class="pre">expiration</span></tt></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">描述:</th><td class="field-body">Swift 令牌过期时间，秒。</td>
</tr>
<tr class="field-even field"><th class="field-name">类型:</th><td class="field-body">Integer</td>
</tr>
<tr class="field-odd field"><th class="field-name">默认值:</th><td class="field-body"><tt class="docutils literal"><span class="pre">24</span> <span class="pre">*</span> <span class="pre">3600</span></tt></td>
</tr>
</tbody>
</table>
<p><tt class="docutils literal"><span class="pre">rgw</span> <span class="pre">swift</span> <span class="pre">url</span></tt></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">描述:</th><td class="field-body">Ceph 对象网关 Swift 接口的 URL 。</td>
</tr>
<tr class="field-even field"><th class="field-name">类型:</th><td class="field-body">String</td>
</tr>
<tr class="field-odd field"><th class="field-name">默认值:</th><td class="field-body">None</td>
</tr>
</tbody>
</table>
<p><tt class="docutils literal"><span class="pre">rgw</span> <span class="pre">swift</span> <span class="pre">url</span> <span class="pre">prefix</span></tt></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">描述:</th><td class="field-body">Swift API 的 URL 前缀。</td>
</tr>
<tr class="field-even field"><th class="field-name">默认值:</th><td class="field-body"><tt class="docutils literal"><span class="pre">swift</span></tt></td>
</tr>
<tr class="field-odd field"><th class="field-name">实例:</th><td class="field-body"><a class="reference external" href="http://fqdn.com/swift">http://fqdn.com/swift</a></td>
</tr>
</tbody>
</table>
<p><tt class="docutils literal"><span class="pre">rgw</span> <span class="pre">swift</span> <span class="pre">auth</span> <span class="pre">url</span></tt></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">描述:</th><td class="field-body">验证 v1 版令牌的默认 URL （如果没用 Swift 内建认证）。</td>
</tr>
<tr class="field-even field"><th class="field-name">类型:</th><td class="field-body">String</td>
</tr>
<tr class="field-odd field"><th class="field-name">默认值:</th><td class="field-body">None</td>
</tr>
</tbody>
</table>
<p><tt class="docutils literal"><span class="pre">rgw</span> <span class="pre">swift</span> <span class="pre">auth</span> <span class="pre">entry</span></tt></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">描述:</th><td class="field-body">Swift 认证 URL 的入口点。</td>
</tr>
<tr class="field-even field"><th class="field-name">类型:</th><td class="field-body">String</td>
</tr>
<tr class="field-odd field"><th class="field-name">默认值:</th><td class="field-body"><tt class="docutils literal"><span class="pre">auth</span></tt></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="id11">
<h2>日志记录选项<a class="headerlink" href="#id11" title="Permalink to this headline">¶</a></h2>
<p><tt class="docutils literal"><span class="pre">rgw</span> <span class="pre">log</span> <span class="pre">nonexistent</span> <span class="pre">bucket</span></tt></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">描述:</th><td class="field-body">让 Ceph 对象网关记录访问不存在的桶的请求。</td>
</tr>
<tr class="field-even field"><th class="field-name">类型:</th><td class="field-body">Boolean</td>
</tr>
<tr class="field-odd field"><th class="field-name">默认值:</th><td class="field-body"><tt class="docutils literal"><span class="pre">false</span></tt></td>
</tr>
</tbody>
</table>
<p><tt class="docutils literal"><span class="pre">rgw</span> <span class="pre">log</span> <span class="pre">object</span> <span class="pre">name</span></tt></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">描述:</th><td class="field-body">对象名的记录格式。关于格式说明见 <em class="manpage">date</em> 。</td>
</tr>
<tr class="field-even field"><th class="field-name">类型:</th><td class="field-body">Date</td>
</tr>
<tr class="field-odd field"><th class="field-name">默认值:</th><td class="field-body"><tt class="docutils literal"><span class="pre">%Y-%m-%d-%H-%i-%n</span></tt></td>
</tr>
</tbody>
</table>
<p><tt class="docutils literal"><span class="pre">rgw</span> <span class="pre">log</span> <span class="pre">object</span> <span class="pre">name</span> <span class="pre">utc</span></tt></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">描述:</th><td class="field-body">记录的对象名是否需包含 UTC 时间，设置为 <tt class="docutils literal"><span class="pre">false</span></tt> 时将使用本地时间。</td>
</tr>
<tr class="field-even field"><th class="field-name">类型:</th><td class="field-body">Boolean</td>
</tr>
<tr class="field-odd field"><th class="field-name">默认值:</th><td class="field-body"><tt class="docutils literal"><span class="pre">false</span></tt></td>
</tr>
</tbody>
</table>
<p><tt class="docutils literal"><span class="pre">rgw</span> <span class="pre">usage</span> <span class="pre">max</span> <span class="pre">shards</span></tt></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">描述:</th><td class="field-body">使用率日志的最大数量。</td>
</tr>
<tr class="field-even field"><th class="field-name">类型:</th><td class="field-body">Integer</td>
</tr>
<tr class="field-odd field"><th class="field-name">默认值:</th><td class="field-body"><tt class="docutils literal"><span class="pre">32</span></tt></td>
</tr>
</tbody>
</table>
<p><tt class="docutils literal"><span class="pre">rgw</span> <span class="pre">usage</span> <span class="pre">max</span> <span class="pre">user</span> <span class="pre">shards</span></tt></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">描述:</th><td class="field-body">单个用户使用率日志的最大数量。</td>
</tr>
<tr class="field-even field"><th class="field-name">类型:</th><td class="field-body">Integer</td>
</tr>
<tr class="field-odd field"><th class="field-name">默认值:</th><td class="field-body"><tt class="docutils literal"><span class="pre">1</span></tt></td>
</tr>
</tbody>
</table>
<p><tt class="docutils literal"><span class="pre">rgw</span> <span class="pre">enable</span> <span class="pre">ops</span> <span class="pre">log</span></tt></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">描述:</th><td class="field-body">允许记录各次成功的 Ceph 对象网关操作。</td>
</tr>
<tr class="field-even field"><th class="field-name">类型:</th><td class="field-body">Boolean</td>
</tr>
<tr class="field-odd field"><th class="field-name">默认值:</th><td class="field-body"><tt class="docutils literal"><span class="pre">false</span></tt></td>
</tr>
</tbody>
</table>
<p><tt class="docutils literal"><span class="pre">rgw</span> <span class="pre">enable</span> <span class="pre">usage</span> <span class="pre">log</span></tt></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">描述:</th><td class="field-body">允许记录使用率日志。</td>
</tr>
<tr class="field-even field"><th class="field-name">类型:</th><td class="field-body">Boolean</td>
</tr>
<tr class="field-odd field"><th class="field-name">默认值:</th><td class="field-body"><tt class="docutils literal"><span class="pre">false</span></tt></td>
</tr>
</tbody>
</table>
<p><tt class="docutils literal"><span class="pre">rgw</span> <span class="pre">ops</span> <span class="pre">log</span> <span class="pre">rados</span></tt></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">描述:</th><td class="field-body">操作日志是否应该写入 Ceph 存储集群后端。</td>
</tr>
<tr class="field-even field"><th class="field-name">类型:</th><td class="field-body">Boolean</td>
</tr>
<tr class="field-odd field"><th class="field-name">默认值:</th><td class="field-body"><tt class="docutils literal"><span class="pre">true</span></tt></td>
</tr>
</tbody>
</table>
<p><tt class="docutils literal"><span class="pre">rgw</span> <span class="pre">ops</span> <span class="pre">log</span> <span class="pre">socket</span> <span class="pre">path</span></tt></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">描述:</th><td class="field-body">用于写入操作日志的 Unix 域套接字。</td>
</tr>
<tr class="field-even field"><th class="field-name">类型:</th><td class="field-body">String</td>
</tr>
<tr class="field-odd field"><th class="field-name">默认值:</th><td class="field-body">None</td>
</tr>
</tbody>
</table>
<p><tt class="docutils literal"><span class="pre">rgw</span> <span class="pre">ops</span> <span class="pre">log</span> <span class="pre">data</span> <span class="pre">backlog</span></tt></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">描述:</th><td class="field-body">最多积攒多少操作日志数据才写入 Unix 域套接字。</td>
</tr>
<tr class="field-even field"><th class="field-name">类型:</th><td class="field-body">Integer</td>
</tr>
<tr class="field-odd field"><th class="field-name">默认值:</th><td class="field-body"><tt class="docutils literal"><span class="pre">5</span> <span class="pre">&lt;&lt;</span> <span class="pre">20</span></tt></td>
</tr>
</tbody>
</table>
<p><tt class="docutils literal"><span class="pre">rgw</span> <span class="pre">usage</span> <span class="pre">log</span> <span class="pre">flush</span> <span class="pre">threshold</span></tt></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">描述:</th><td class="field-body">使用率日志合并过多少条目才刷回。</td>
</tr>
<tr class="field-even field"><th class="field-name">类型:</th><td class="field-body">Integer</td>
</tr>
<tr class="field-odd field"><th class="field-name">默认值:</th><td class="field-body">1024</td>
</tr>
</tbody>
</table>
<p><tt class="docutils literal"><span class="pre">rgw</span> <span class="pre">usage</span> <span class="pre">log</span> <span class="pre">tick</span> <span class="pre">interval</span></tt></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">描述:</th><td class="field-body">每 <tt class="docutils literal"><span class="pre">n</span></tt> 秒执行一次使用率日志刷回。</td>
</tr>
<tr class="field-even field"><th class="field-name">类型:</th><td class="field-body">Integer</td>
</tr>
<tr class="field-odd field"><th class="field-name">默认值:</th><td class="field-body"><tt class="docutils literal"><span class="pre">30</span></tt></td>
</tr>
</tbody>
</table>
<p><tt class="docutils literal"><span class="pre">rgw</span> <span class="pre">intent</span> <span class="pre">log</span> <span class="pre">object</span> <span class="pre">name</span></tt></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">描述:</th><td class="field-body">意图日志对象名的记录格式。格式的详细说明见 <em class="manpage">date</em> 。</td>
</tr>
<tr class="field-even field"><th class="field-name">类型:</th><td class="field-body">Date</td>
</tr>
<tr class="field-odd field"><th class="field-name">默认值:</th><td class="field-body"><tt class="docutils literal"><span class="pre">%Y-%m-%d-%i-%n</span></tt></td>
</tr>
</tbody>
</table>
<p><tt class="docutils literal"><span class="pre">rgw</span> <span class="pre">intent</span> <span class="pre">log</span> <span class="pre">object</span> <span class="pre">name</span> <span class="pre">utc</span></tt></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">描述:</th><td class="field-body">意图日志对象名是否应包含 UTC 时间，设置为 <tt class="docutils literal"><span class="pre">false</span></tt> 时使用本地时间。</td>
</tr>
<tr class="field-even field"><th class="field-name">类型:</th><td class="field-body">Boolean</td>
</tr>
<tr class="field-odd field"><th class="field-name">默认值:</th><td class="field-body"><tt class="docutils literal"><span class="pre">false</span></tt></td>
</tr>
</tbody>
</table>
<p><tt class="docutils literal"><span class="pre">rgw</span> <span class="pre">data</span> <span class="pre">log</span> <span class="pre">window</span></tt></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">描述:</th><td class="field-body">数据日志窗口，秒。</td>
</tr>
<tr class="field-even field"><th class="field-name">类型:</th><td class="field-body">Integer</td>
</tr>
<tr class="field-odd field"><th class="field-name">默认值:</th><td class="field-body"><tt class="docutils literal"><span class="pre">30</span></tt></td>
</tr>
</tbody>
</table>
<p><tt class="docutils literal"><span class="pre">rgw</span> <span class="pre">data</span> <span class="pre">log</span> <span class="pre">changes</span> <span class="pre">size</span></tt></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">描述:</th><td class="field-body">内存中保留的数据变更日志条数。</td>
</tr>
<tr class="field-even field"><th class="field-name">类型:</th><td class="field-body">Integer</td>
</tr>
<tr class="field-odd field"><th class="field-name">默认值:</th><td class="field-body"><tt class="docutils literal"><span class="pre">1000</span></tt></td>
</tr>
</tbody>
</table>
<p><tt class="docutils literal"><span class="pre">rgw</span> <span class="pre">data</span> <span class="pre">log</span> <span class="pre">num</span> <span class="pre">shards</span></tt></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">描述:</th><td class="field-body">用于保存数据变更日志的碎片（对象）数量。</td>
</tr>
<tr class="field-even field"><th class="field-name">类型:</th><td class="field-body">Integer</td>
</tr>
<tr class="field-odd field"><th class="field-name">默认值:</th><td class="field-body"><tt class="docutils literal"><span class="pre">128</span></tt></td>
</tr>
</tbody>
</table>
<p><tt class="docutils literal"><span class="pre">rgw</span> <span class="pre">data</span> <span class="pre">log</span> <span class="pre">obj</span> <span class="pre">prefix</span></tt></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">描述:</th><td class="field-body">数据日志的对象名前缀。</td>
</tr>
<tr class="field-even field"><th class="field-name">类型:</th><td class="field-body">String</td>
</tr>
<tr class="field-odd field"><th class="field-name">默认值:</th><td class="field-body"><tt class="docutils literal"><span class="pre">data_log</span></tt></td>
</tr>
</tbody>
</table>
<p><tt class="docutils literal"><span class="pre">rgw</span> <span class="pre">replica</span> <span class="pre">log</span> <span class="pre">obj</span> <span class="pre">prefix</span></tt></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">描述:</th><td class="field-body">复制日志的对象名前缀。</td>
</tr>
<tr class="field-even field"><th class="field-name">类型:</th><td class="field-body">String</td>
</tr>
<tr class="field-odd field"><th class="field-name">默认值:</th><td class="field-body"><tt class="docutils literal"><span class="pre">replica</span> <span class="pre">log</span></tt></td>
</tr>
</tbody>
</table>
<p><tt class="docutils literal"><span class="pre">rgw</span> <span class="pre">md</span> <span class="pre">log</span> <span class="pre">max</span> <span class="pre">shards</span></tt></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">描述:</th><td class="field-body">用于元数据日志的最大碎片数。</td>
</tr>
<tr class="field-even field"><th class="field-name">类型:</th><td class="field-body">Integer</td>
</tr>
<tr class="field-odd field"><th class="field-name">默认值:</th><td class="field-body"><tt class="docutils literal"><span class="pre">64</span></tt></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="keystone">
<h2>Keystone 选项<a class="headerlink" href="#keystone" title="Permalink to this headline">¶</a></h2>
<p><tt class="docutils literal"><span class="pre">rgw</span> <span class="pre">keystone</span> <span class="pre">url</span></tt></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">描述:</th><td class="field-body">Keystone 服务器的 URL 。</td>
</tr>
<tr class="field-even field"><th class="field-name">类型:</th><td class="field-body">String</td>
</tr>
<tr class="field-odd field"><th class="field-name">默认值:</th><td class="field-body">None</td>
</tr>
</tbody>
</table>
<p><tt class="docutils literal"><span class="pre">rgw</span> <span class="pre">keystone</span> <span class="pre">admin</span> <span class="pre">token</span></tt></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">描述:</th><td class="field-body">Keystone 的管理令牌（共享密钥）。</td>
</tr>
<tr class="field-even field"><th class="field-name">类型:</th><td class="field-body">String</td>
</tr>
<tr class="field-odd field"><th class="field-name">默认值:</th><td class="field-body">None</td>
</tr>
</tbody>
</table>
<p><tt class="docutils literal"><span class="pre">rgw</span> <span class="pre">keystone</span> <span class="pre">accepted</span> <span class="pre">roles</span></tt></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">描述:</th><td class="field-body">要接受请求所需的角色。</td>
</tr>
<tr class="field-even field"><th class="field-name">类型:</th><td class="field-body">String</td>
</tr>
<tr class="field-odd field"><th class="field-name">默认值:</th><td class="field-body"><tt class="docutils literal"><span class="pre">Member,</span> <span class="pre">admin</span></tt></td>
</tr>
</tbody>
</table>
<p><tt class="docutils literal"><span class="pre">rgw</span> <span class="pre">keystone</span> <span class="pre">token</span> <span class="pre">cache</span> <span class="pre">size</span></tt></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">描述:</th><td class="field-body">各 Keystone 令牌缓存的最大条数。</td>
</tr>
<tr class="field-even field"><th class="field-name">类型:</th><td class="field-body">Integer</td>
</tr>
<tr class="field-odd field"><th class="field-name">默认值:</th><td class="field-body"><tt class="docutils literal"><span class="pre">10000</span></tt></td>
</tr>
</tbody>
</table>
<p><tt class="docutils literal"><span class="pre">rgw</span> <span class="pre">keystone</span> <span class="pre">revocation</span> <span class="pre">interval</span></tt></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">描述:</th><td class="field-body">令牌有效期查验的周期，秒。</td>
</tr>
<tr class="field-even field"><th class="field-name">类型:</th><td class="field-body">Integer</td>
</tr>
<tr class="field-odd field"><th class="field-name">默认值:</th><td class="field-body"><tt class="docutils literal"><span class="pre">15</span> <span class="pre">*</span> <span class="pre">60</span></tt></td>
</tr>
</tbody>
</table>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../../">
              <img class="logo" src="../../_static/logo.png" alt="Logo"/>
            </a></p>
<h3><a href="../../">Table Of Contents</a></h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../start/intro/">Ceph 简介</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../start/">安装（快速）</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../install/">安装（手动）</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../rados/">Ceph 存储集群</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../cephfs/">Ceph 文件系统</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../rbd/rbd/">Ceph 块设备</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../">Ceph 对象网关</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../install/install-ceph-gateway/">手动安装</a></li>
<li class="toctree-l2"><a class="reference internal" href="../config/">简单配置</a></li>
<li class="toctree-l2"><a class="reference internal" href="../federated-config/">联盟配置</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="">配置参考</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#region">region （域组）</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id1">罗列 region</a></li>
<li class="toctree-l4"><a class="reference internal" href="#region-map">获取 region-map</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id2">获取单个 region</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id3">设置一 region</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id4">配置 region 图</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#id5">域</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id6">列举域</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id7">获取单个域</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id8">配置域</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#id9">region 和域选项</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id10">存储池</a></li>
<li class="toctree-l3"><a class="reference internal" href="#swift">Swift 选项</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id11">日志记录选项</a></li>
<li class="toctree-l3"><a class="reference internal" href="#keystone">Keystone 选项</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../admin/">管理指南</a></li>
<li class="toctree-l2"><a class="reference internal" href="../purge-temp/">清除临时数据</a></li>
<li class="toctree-l2"><a class="reference internal" href="../s3/">S3 API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../swift/">Swift API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../adminops/">管理操作 API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../keystone/">与 OpenStack Keystone 对接</a></li>
<li class="toctree-l2"><a class="reference internal" href="../troubleshooting/">故障排除</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../man/8/radosgw/">radosgw 手册页</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../man/8/radosgw-admin/">radosgw-admin 手册页</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../api/">API 文档</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../architecture/">体系结构</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../dev/">开发文档</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../release-notes/">Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../releases/">Ceph 版本</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../glossary/">Ceph 术语</a></li>
</ul>


<!-- ugly kludge to make genindex look like it's part of the toc -->
<ul style="margin-top: -10px"><li class="toctree-l1"><a class="reference internal" href="../../genindex/">Index</a></li></ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../../search/" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex/" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../../py-modindex/" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="../admin/" title="管理手册"
             >next</a> |</li>
        <li class="right" >
          <a href="../federated-config/" title="联盟网关的配置"
             >previous</a> |</li>
        <li><a href="../../">Ceph Documentation</a> &raquo;</li>
          <li><a href="../" >Ceph 对象网关</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2010-2014, Inktank Storage, Inc. and contributors. Licensed under Creative Commons BY-SA.
    </div>
  </body>
</html>